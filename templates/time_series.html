{% extends "base.html" %}

{% block title %}Time Series - Climate Portal{% endblock %}

{% block content %}
<div class="row mb-3">
    <div class="col-12">
        <h2>Climate Time Series Analysis</h2>
        <p>Analyze climate trends over time for different regions</p>
    </div>
</div>

<div class="row mb-3">
    <div class="col-md-3">
        <label for="locationSelect" class="form-label">Location</label>
        <select id="locationSelect" class="form-select">
            <option value="punjab">Punjab</option>
            <option value="sindh">Sindh</option>
            <option value="kpk">Khyber Pakhtunkhwa</option>
            <option value="balochistan">Balochistan</option>
            <option value="gb">Gilgit-Baltistan</option>
            <option value="ajk">Azad Kashmir</option>
        </select>
    </div>
    <div class="col-md-3">
        <label for="variableSelect" class="form-label">Variable</label>
        <select id="variableSelect" class="form-select">
            <option value="temperature">Temperature</option>
            <option value="precipitation">Precipitation</option>
            <option value="humidity">Humidity</option>
            <option value="wind_speed">Wind Speed</option>
        </select>
    </div>
    <div class="col-md-2">
        <label for="startDate" class="form-label">Start Date</label>
        <input type="date" id="startDate" class="form-control" value="2020-01-01">
    </div>
    <div class="col-md-2">
        <label for="endDate" class="form-label">End Date</label>
        <input type="date" id="endDate" class="form-control">
    </div>
    <div class="col-md-2">
        <label for="aggregationSelect" class="form-label">Aggregation</label>
        <select id="aggregationSelect" class="form-select">
            <option value="hourly">Hourly</option>
            <option value="daily">Daily</option>
            <option value="monthly" selected>Monthly</option>
            <option value="seasonal">Seasonal</option>
            <option value="annual">Annual</option>
        </select>
    </div>
    <div class="col-md-2">
        <label class="form-label">&nbsp;</label>
        <button id="updateChart" class="btn btn-primary w-100">Update</button>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div id="timeseriesChart"></div>
    </div>
</div>

<div class="row mt-3">
    <div class="col-12">
        <button id="downloadCSV" class="btn btn-success">
            <i class="fas fa-download"></i> Download Data as CSV
        </button>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.getElementById('endDate').value = new Date().toISOString().split('T')[0];
</script>
<script src="{{ url_for('static', filename='js/charts.js') }}"></script>
{% endblock %}
